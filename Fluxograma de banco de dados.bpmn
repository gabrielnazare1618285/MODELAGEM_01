<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1rvsan4" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <bpmn:collaboration id="Collaboration_0wkluqe">
    <bpmn:participant id="Participant_1vjlxpu" name="Usuário" processRef="Process_0jc0fhs" />
    <bpmn:participant id="Participant_1k8ep3d" name="Sistema" processRef="Process_1x0p13l" />
    <bpmn:participant id="Participant_12tsd2v" name="Banco de dados" processRef="Process_0bd4qs3" />
    <bpmn:participant id="Participant_1dwdrd6" name="Usuário" processRef="Process_0m6xdsc" />
    <bpmn:participant id="Participant_0gh2ndh" name="Sistema" processRef="Process_0soxama" />
    <bpmn:participant id="Participant_1lbxb62" name="Banco de dados" processRef="Process_1b8bnmz" />
    <bpmn:messageFlow id="Flow_100u7nh" sourceRef="Activity_1siqred" targetRef="Event_120bc77" />
    <bpmn:messageFlow id="Flow_0fpemta" sourceRef="Activity_0fj98qr" targetRef="Event_120bc77" />
    <bpmn:messageFlow id="Flow_04t2z2x" sourceRef="Activity_1ayoqg5" targetRef="Activity_1p0i1j7" />
    <bpmn:messageFlow id="Flow_02zystt" sourceRef="Activity_00flimm" targetRef="Activity_0v9n56y" />
  </bpmn:collaboration>
  <bpmn:process id="Process_0jc0fhs" isExecutable="false">
    <bpmn:startEvent id="Event_120bc77" name="Gerar QR Code" />
  </bpmn:process>
  <bpmn:process id="Process_1x0p13l">
    <bpmn:task id="Activity_1siqred" name="Chamar API Asaas para Criar QR Code" />
    <bpmn:task id="Activity_030ra1m" name="Atualizar Saldo no Banco de dados">
      <bpmn:incoming>Flow_0h08yej</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0gkwsjr">
        <bpmn:targetRef>DataStoreReference_0f5hffr</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:subProcess id="Activity_0fj98qr" name="Aguardar Notificação de Pagamento (Webhook)">
      <bpmn:outgoing>Flow_0h08yej</bpmn:outgoing>
      <bpmn:startEvent id="Event_15p4bfn" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_0h08yej" sourceRef="Activity_0fj98qr" targetRef="Activity_030ra1m" />
  </bpmn:process>
  <bpmn:process id="Process_0bd4qs3">
    <bpmn:laneSet id="LaneSet_1ujp7my" />
    <bpmn:dataStoreReference id="DataStoreReference_0f5hffr" name="Saldo atualizado" />
  </bpmn:process>
  <bpmn:process id="Process_0m6xdsc">
    <bpmn:startEvent id="Event_02md0hd" name="Solicitação de transferência">
      <bpmn:outgoing>Flow_0wi67q2</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_1ayoqg5" name="Informar valor confirmar">
      <bpmn:incoming>Flow_0wi67q2</bpmn:incoming>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0wi67q2" sourceRef="Event_02md0hd" targetRef="Activity_1ayoqg5" />
  </bpmn:process>
  <bpmn:process id="Process_0soxama">
    <bpmn:exclusiveGateway id="Gateway_0vsufuj" name="Saldo é suficiente?">
      <bpmn:incoming>Flow_1hieeqp</bpmn:incoming>
      <bpmn:outgoing>Flow_0zg7piz</bpmn:outgoing>
      <bpmn:outgoing>Flow_0f622v4</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Activity_1p0i1j7" name="Consultar saldo no banco de dados">
      <bpmn:outgoing>Flow_1hieeqp</bpmn:outgoing>
    </bpmn:task>
    <bpmn:startEvent id="Event_11368e4" name="Transferência encerrada">
      <bpmn:outgoing>Flow_0q1omm9</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_12gbc1f" name="Notificar Usuário sobre Saldo Insuficiente">
      <bpmn:incoming>Flow_0zg7piz</bpmn:incoming>
      <bpmn:incoming>Flow_0q1omm9</bpmn:incoming>
    </bpmn:task>
    <bpmn:subProcess id="Activity_0v9n56y" name="Chamar API para Executar Transferência">
      <bpmn:incoming>Flow_0f622v4</bpmn:incoming>
      <bpmn:startEvent id="Event_1bqoldt" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_1hieeqp" sourceRef="Activity_1p0i1j7" targetRef="Gateway_0vsufuj" />
    <bpmn:sequenceFlow id="Flow_0zg7piz" name="Não" sourceRef="Gateway_0vsufuj" targetRef="Activity_12gbc1f" />
    <bpmn:sequenceFlow id="Flow_0f622v4" name="Sim" sourceRef="Gateway_0vsufuj" targetRef="Activity_0v9n56y" />
    <bpmn:sequenceFlow id="Flow_0q1omm9" sourceRef="Event_11368e4" targetRef="Activity_12gbc1f" />
  </bpmn:process>
  <bpmn:process id="Process_1b8bnmz">
    <bpmn:task id="Activity_0jzl986" name="Calcular retençao de 7%">
      <bpmn:incoming>Flow_0guibfu</bpmn:incoming>
      <bpmn:outgoing>Flow_0uijrei</bpmn:outgoing>
    </bpmn:task>
    <bpmn:startEvent id="Event_0dwednh" name="Transferência  finalizada">
      <bpmn:outgoing>Flow_0guibfu</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_00flimm" name="Registrar Transação de Saída no BD">
      <bpmn:incoming>Flow_0uijrei</bpmn:incoming>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0guibfu" sourceRef="Event_0dwednh" targetRef="Activity_0jzl986" />
    <bpmn:sequenceFlow id="Flow_0uijrei" sourceRef="Activity_0jzl986" targetRef="Activity_00flimm" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0wkluqe">
      <bpmndi:BPMNShape id="Participant_1vjlxpu_di" bpmnElement="Participant_1vjlxpu" isHorizontal="true">
        <dc:Bounds x="156" y="62" width="864" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_120bc77_di" bpmnElement="Event_120bc77">
        <dc:Bounds x="212" y="112" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="191" y="88" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1k8ep3d_di" bpmnElement="Participant_1k8ep3d" isHorizontal="true">
        <dc:Bounds x="156" y="310" width="864" height="460" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1siqred_di" bpmnElement="Activity_1siqred">
        <dc:Bounds x="200" y="340" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_030ra1m_di" bpmnElement="Activity_030ra1m">
        <dc:Bounds x="590" y="370" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fj98qr_di" bpmnElement="Activity_0fj98qr" isExpanded="true">
        <dc:Bounds x="360" y="340" width="140" height="140" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_15p4bfn_di" bpmnElement="Event_15p4bfn">
        <dc:Bounds x="400" y="422" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0h08yej_di" bpmnElement="Flow_0h08yej">
        <di:waypoint x="500" y="410" />
        <di:waypoint x="590" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_12tsd2v_di" bpmnElement="Participant_12tsd2v" isHorizontal="true">
        <dc:Bounds x="156" y="770" width="864" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0f5hffr_di" bpmnElement="DataStoreReference_0f5hffr">
        <dc:Bounds x="635" y="795" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="619" y="852" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1dwdrd6_di" bpmnElement="Participant_1dwdrd6" isHorizontal="true">
        <dc:Bounds x="1260" y="62" width="600" height="288" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02md0hd_di" bpmnElement="Event_02md0hd">
        <dc:Bounds x="1322" y="92" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1306" y="135" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ayoqg5_di" bpmnElement="Activity_1ayoqg5">
        <dc:Bounds x="1470" y="70" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0wi67q2_di" bpmnElement="Flow_0wi67q2">
        <di:waypoint x="1358" y="110" />
        <di:waypoint x="1470" y="110" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0gh2ndh_di" bpmnElement="Participant_0gh2ndh" isHorizontal="true">
        <dc:Bounds x="1260" y="350" width="600" height="330" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0vsufuj_di" bpmnElement="Gateway_0vsufuj" isMarkerVisible="true">
        <dc:Bounds x="1525" y="495" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1524" y="552" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1p0i1j7_di" bpmnElement="Activity_1p0i1j7">
        <dc:Bounds x="1500" y="370" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_11368e4_di" bpmnElement="Event_11368e4">
        <dc:Bounds x="1342" y="382" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1327" y="344.5" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_12gbc1f_di" bpmnElement="Activity_12gbc1f">
        <dc:Bounds x="1330" y="480" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0v9n56y_di" bpmnElement="Activity_0v9n56y" isExpanded="true">
        <dc:Bounds x="1670" y="450" width="140" height="140" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1bqoldt_di" bpmnElement="Event_1bqoldt">
        <dc:Bounds x="1710" y="532" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0zg7piz_di" bpmnElement="Flow_0zg7piz">
        <di:waypoint x="1525" y="520" />
        <di:waypoint x="1430" y="520" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1468" y="502" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q1omm9_di" bpmnElement="Flow_0q1omm9">
        <di:waypoint x="1360" y="418" />
        <di:waypoint x="1360" y="449" />
        <di:waypoint x="1380" y="449" />
        <di:waypoint x="1380" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0f622v4_di" bpmnElement="Flow_0f622v4">
        <di:waypoint x="1575" y="520" />
        <di:waypoint x="1670" y="520" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1613" y="502" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hieeqp_di" bpmnElement="Flow_1hieeqp">
        <di:waypoint x="1550" y="450" />
        <di:waypoint x="1550" y="495" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1lbxb62_di" bpmnElement="Participant_1lbxb62" isHorizontal="true">
        <dc:Bounds x="1260" y="620" width="600" height="220" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jzl986_di" bpmnElement="Activity_0jzl986">
        <dc:Bounds x="1510" y="660" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0dwednh_di" bpmnElement="Event_0dwednh">
        <dc:Bounds x="1402" y="682" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1386" y="725" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_00flimm_di" bpmnElement="Activity_00flimm">
        <dc:Bounds x="1670" y="660" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0guibfu_di" bpmnElement="Flow_0guibfu">
        <di:waypoint x="1438" y="700" />
        <di:waypoint x="1510" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uijrei_di" bpmnElement="Flow_0uijrei">
        <di:waypoint x="1610" y="700" />
        <di:waypoint x="1670" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_100u7nh_di" bpmnElement="Flow_100u7nh">
        <di:waypoint x="230" y="340" />
        <di:waypoint x="230" y="148" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fpemta_di" bpmnElement="Flow_0fpemta">
        <di:waypoint x="430" y="340" />
        <di:waypoint x="430" y="244" />
        <di:waypoint x="230" y="244" />
        <di:waypoint x="230" y="148" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0gkwsjr_di" bpmnElement="DataOutputAssociation_0gkwsjr">
        <di:waypoint x="642" y="450" />
        <di:waypoint x="659" y="795" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04t2z2x_di" bpmnElement="Flow_04t2z2x">
        <di:waypoint x="1520" y="150" />
        <di:waypoint x="1520" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02zystt_di" bpmnElement="Flow_02zystt">
        <di:waypoint x="1720" y="660" />
        <di:waypoint x="1720" y="590" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
